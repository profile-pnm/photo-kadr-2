-- H2 2.3.232; 
SET DB_CLOSE_DELAY -1;         
;              
CREATE USER IF NOT EXISTS "SA" SALT 'c3e3f80cf85b8aaa' HASH 'f491f430e32462997fbdd5b61b56f9663e0db9397b8bed1a80d848fd44a3fa2a' ADMIN;          
CREATE CACHED TABLE "PUBLIC"."USERS"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 2) NOT NULL,
    "USERNAME" CHARACTER VARYING(20) NOT NULL,
    "PASSWORD" CHARACTER VARYING(100) NOT NULL,
    "ENABLED" BOOLEAN NOT NULL
); 
ALTER TABLE "PUBLIC"."USERS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4" PRIMARY KEY("ID");         
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.USERS;    
INSERT INTO "PUBLIC"."USERS" VALUES
(1, 'pnm', '$2a$10$iRSpTqh9QhbpHHN3iq2ETOSoWkTxLocvjrLyzjWujXwAZG1IB25oK', TRUE);          
CREATE CACHED TABLE "PUBLIC"."PHOTOS"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 2) NOT NULL,
    "FILENAME" CHARACTER VARYING(255) NOT NULL,
    "DESCRIPTION" CHARACTER VARYING(255),
    "USER_ID" BIGINT NOT NULL
);      
ALTER TABLE "PUBLIC"."PHOTOS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_8" PRIMARY KEY("ID");        
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.PHOTOS;   
INSERT INTO "PUBLIC"."PHOTOS" VALUES
(1, '5dbdf2ac-c8a7-49e6-a3be-1c3734ed4e58.svg', 'logo', 1);               
ALTER TABLE "PUBLIC"."USERS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4D" UNIQUE NULLS DISTINCT ("USERNAME");       
ALTER TABLE "PUBLIC"."PHOTOS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_8C" FOREIGN KEY("USER_ID") REFERENCES "PUBLIC"."USERS"("ID") NOCHECK;        
